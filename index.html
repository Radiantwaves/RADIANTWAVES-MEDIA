<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RadiantWaves Media</title>

  <!-- PWA manifest -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#111111">

  <!-- Optional CSS (you can keep your previous styles here) -->
  <style>
    body { font-family: Arial, sans-serif; margin:0; padding:0; background:#f4f4f4; }
    header { padding: 10px; background:#111; color:white; text-align:center; }
    #liveDateTime { font-size:14px; margin-top:5px; }
    #main-content { padding:10px; }
    button#musicToggle { position:fixed; bottom:20px; right:20px; padding:10px; background:#111; color:white; border:none; border-radius:5px; }
    .news-section { margin-bottom:20px; }
    .news-section h2 { border-bottom:2px solid #111; padding-bottom:5px; }
    .news-item { margin-bottom:10px; }
    .news-item img { max-width:100%; height:auto; display:block; margin-top:5px; }
  </style>
</head>
<body>

<header>
  <h1>RadiantWaves Media</h1>
  <div id="liveDateTime"></div>
</header>

<div id="main-content">
  <!-- News sections exactly as before -->
  <div id="home" class="news-section"><h2>Home</h2></div>
  <div id="nigeria" class="news-section"><h2>Nigeria</h2></div>
  <div id="europe" class="news-section"><h2>Europe</h2></div>
  <div id="africa" class="news-section"><h2>Africa</h2></div>
  <div id="asia" class="news-section"><h2>Asia</h2></div>
  <div id="america" class="news-section"><h2>America</h2></div>
  <div id="politics" class="news-section"><h2>Politics</h2></div>
  <div id="business" class="news-section"><h2>Business</h2></div>
  <div id="music" class="news-section"><h2>Music</h2></div>
  <div id="movies" class="news-section"><h2>Movies</h2></div>
  <div id="olympics" class="news-section"><h2>Olympics</h2></div>
</div>

<!-- Background music -->
<audio id="bgMusic" autoplay loop>
  <source src="news-music.mp3" type="audio/mpeg">
</audio>
<button id="musicToggle" onclick="toggleMusic()">Toggle Music</button>

<script>
  // Live date & time
  function updateTime() {
    const now = new Date();
    document.getElementById('liveDateTime').textContent = now.toLocaleString();
  }
  setInterval(updateTime, 1000);
  updateTime();

  // Background music toggle
  const music = document.getElementById('bgMusic');
  function toggleMusic() {
    if(music.paused){ music.play(); } else { music.pause(); }
  }

  // PWA Service Worker
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', function() {
      navigator.serviceWorker.register('service-worker.js')
      .then(function(registration) {
        console.log('ServiceWorker registered with scope:', registration.scope);
      }, function(err) {
        console.log('ServiceWorker registration failed:', err);
      });
    });
  }

  // Load news dynamically from news.json (keeps previous layout intact)
  fetch('news.json')
    .then(response => response.json())
    .then(data => {
      const sections = ['home','nigeria','europe','africa','asia','america','politics','business','music','movies','olympics'];
      sections.forEach(section => {
        const container = document.getElementById(section);
        if(container && data[section] && Array.isArray(data[section])) {
          data[section].forEach(item => {
            const div = document.createElement('div');
            div.classList.add('news-item');
            div.innerHTML = `<strong>${item.title}</strong><p>${item.summary}</p>` + (item.image ? `<img src="${item.image}" alt="${item.title}">` : '');
            container.appendChild(div);
          });
        }
      });

      // Main story in Home section
      if(data.main){
        const homeContainer = document.getElementById('home');
        const div = document.createElement('div');
        div.classList.add('news-item');
        div.innerHTML = `<strong>${data.main.title}</strong><p>${data.main.summary}</p>` + (data.main.image ? `<img src="${data.main.image}" alt="${data.main.title}">` : '');
        homeContainer.insertBefore(div, homeContainer.firstChild);
      }
    })
    .catch(err => console.error('Error loading news:', err));
</script>

</body>
</html>
